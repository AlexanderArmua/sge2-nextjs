model Libro {
    // PK
    id Int @id @default(autoincrement())

    // Identidad
    bibliotecaId String @unique // TODO: FK
    inventarioId String @unique // TODO: FK

    titulo String

    anio Int
    isbn String @unique

    materias LibroMateria[]

    laboratorioId Int
    laboratorio   Laboratorio @relation(fields: [laboratorioId], references: [id])

    armarioId Int
    armario   Armario @relation(fields: [armarioId], references: [id])

    estanteId Int
    estante   Estante @relation(fields: [estanteId], references: [id])

    autorId Int
    autor   LibroAutor @relation(fields: [autorId], references: [id])

    idiomaId Int
    idioma   LibroIdioma @relation(fields: [idiomaId], references: [id])

    editorialId Int
    editorial   LibroEditorial @relation(fields: [editorialId], references: [id])

    sedeId Int
    sede   Sede @relation(fields: [sedeId], references: [id])

    reservas ReservaLibro[]

    fechaCreacion        DateTime @default(now())
    fechaModificacion    DateTime @updatedAt
    usuarioCreadorId     String
    usuarioModificadorId String

    @@index([bibliotecaId])
    @@index([inventarioId])
}

model LibroMateria {
    libroId   Int
    materiaId Int

    libro   Libro   @relation(fields: [libroId], references: [id])
    materia Materia @relation(fields: [materiaId], references: [id])

    fechaCreacion    DateTime @default(now())
    usuarioCreadorId String

    @@id([libroId, materiaId])
}

model LibroAutor {
    id Int @id @default(autoincrement())

    autorNombre String @unique

    libros Libro[]

    fechaCreacion    DateTime @default(now())
    usuarioCreadorId String

    @@index([autorNombre])
}

model LibroIdioma {
    id Int @id @default(autoincrement())

    idioma String @unique

    libros Libro[]

    fechaCreacion    DateTime @default(now())
    usuarioCreadorId String

    @@index([idioma])
}

model LibroEditorial {
    id Int @id @default(autoincrement())

    editorial String @unique

    libros Libro[]

    fechaCreacion    DateTime @default(now())
    usuarioCreadorId String

    @@index([editorial])
}
